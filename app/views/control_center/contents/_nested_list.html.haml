- if root && content.level == 0
  - children = [content]
- else
  - children = ControlCenter::Content.where(:parent_id => content.id)
- for child in children
  %ul.contents{:class => "level-#{child.level}"}
    %li
      %p
        %span= child.title
        = link_to "Edit", edit_control_center_content_path(child)
        = link_to "Delete", control_center_content_path(child), :method => :delete, :confirm => "Are you sure?"
        = link_to "Add Child Content", new_control_center_content_path(:level => child.level + 1, :parent_id => child.id)
    - if ControlCenter::Content.where(:parent_id => child.id).count > 0
      = render :partial => "nested_list", :locals => {:content => child, :root => false}